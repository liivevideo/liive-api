env:
  global:
    - APP_NAME=live-api

language: node_js

node_js:
   - "6.2.2"

before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage

script:
  - npm test
  - npm run-script test-shippable

after_script:
  - npm run-script test-coverage
  - npm run-script shippable-cobertura
  - git remote add heroku https://git.heroku.com/$APP_NAME.git
  - git push -f heroku $BRANCH

notifications:
  email:
    - robb@liivevideo.com

  webhooks:
    urls:
      - $GITTER_IM_URL
    on_success: change  # options: [always|never|change] default: always
    on_failure: always  # options: [always|never|change] default: always
    on_start: never     # options: [always|never|change] default: always
