env:
  global:
    - APP_NAME=liive-api

language: node_js

node_js:
   - "6.2.2"

build:
  pre_ci:
    - mkdir -p shippable/testresults
    - mkdir -p shippable/codecoverage

  ci:
    - npm install
    - npm test
    - npm run-script test-shippable

  post_ci:
    - npm run-script test-coverage
    - npm run-script shippable-cobertura

  on_success:
    - git push -f git@heroku.com:$APP_NAME-$BRANCH.git master

notifications:
  email:
    recipients:
      - robb@liivevideo.com
    on_success: always
    on_failure: always
