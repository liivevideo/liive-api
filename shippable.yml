env:
  global:
    - APP_NAME=liive-api

language: node_js

node_js:
   - "6.2.2"

build:
  pre_ci:
    - mkdir -p shippable/testresults
    - mkdir -p shippable/codecoverage

  ci:
    - npm install
    - npm test
    - npm run-script test-shippable

  post_ci:
    - npm run-script test-coverage
    - npm run-script shippable-cobertura

  on_success:
    - git push -f git@heroku.com:$APP_NAME-$BRANCH.git $BRANCH

notifications:
  - integrationName: email
    type: email
    recipients:
      - robb@liivevideo.com
    branches:
      only:
        - master
        - develop
    on_success: change  # options: [always|never|change] default: always
    on_failure: always  # options: [always|never|change] default: always
    on_start: never     # options: [always|never|change] default: always

  - integrationName: my_slack_integration
    type: slack
    recipients:
      - "#ci"
    branches:
      only:
        - master
        - develop
    on_success: change
    on_failure: always

